<!DOCTYPE html>
<html lang="zh-cn" class=""><head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  
  <meta name="description" content="
当前的几大爱好，计算机、人像摄影、阅读、和运动。缺了哪一个都不行。
引言
今天在用 blogdown 结合 GitHub Pages 搭建博客的过程真是踩坑无数：
安装 blogdown
当时我是在 RStudio 的控制台中输入
install.packages(blogdown)
但是一直装不上。

先是早上因为依赖promises装不上。 blogdown 装不上，通过 Arch Linux 的 yay 解决了。

yay -S r-promises

然后是 RStudio 不能走代理，与 blogdown 库地址的连接时不时断线。最后在多次尝试之后，安装上了。

现在回过头看，有另外两种办法可以避免这一问题。
# 一是通过 AUR 安装 R 扩展包的方式来安装，其有更好的依赖管理，并且如果设置了镜像的话，就可以避免代理的问题。
yay -S r-blogdown
# 如果终端可以正常走代理的话，可以通过下面这种方式
# 在命令行 R 中进行安装。这样可以避免 RStudio 的代理设置问题。
install.packages(blogdown)
安装 hugo
采用 AUR 安装扩展包的方式的同学会发现，这一步可以跳过了。因为 AUR 安装依赖时，已经安装好 Hugo 了。
采用 R 或 RStudio 安装的同学需要跟着进行操作，安装 Hugo。
blogdown::install_hugo()
这个安装会连接到 yihui 的网站，但是因为 RStudio 连接外网不稳定的原因。国内的同学可能需要通过下面两种方式。"> 

  <title>
    
    There were missing in making blog site by using blogdown
    
  </title>


  <link rel="shortcut icon" type="image/x-icon" href="/" />
  
  
  
  <link rel="stylesheet" href="/css/main.b2716da050f7055d51b7ee4fd8cee8534a741849de0347fa05cbcbb7dcc3ca481f3a1f8f752a1adaaf94fdf8fd19d57992814c6d6998ed581820ac45b270ac00.css" integrity="sha512-snFtoFD3BV1Rt&#43;5P2M7oU0p0GEneA0f6BcvLt9zDykgfOh&#43;PdSoa2q&#43;U/fj9GdV5koFMbWmY7VgYIKxFsnCsAA==" />
  
</head><body a="auto">
        <main class="page-content" aria-label="Content">
            <div class="w">
<a href="/">..</a>

<article style="flex: 1;">
    <h1>There were missing in making blog site by using blogdown</h1>

    <div style="display: flex; align-items: center; color:#888888;">
        <p class="post-meta">
             Ginger Yu
        </p>
        <span style="margin: 0 1px;">·</span>
        <p class="post-meta">
            <time datetime="2021-08-03 00:00:00 &#43;0000 UTC">
                2021/08/03
            </time>
        </p>
    </div>

    <blockquote>
<p>当前的几大爱好，计算机、人像摄影、阅读、和运动。缺了哪一个都不行。</p></blockquote>
<h2 id="引言">引言</h2>
<p>今天在用 blogdown 结合 GitHub Pages 搭建博客的过程真是踩坑无数：</p>
<h2 id="安装-blogdown">安装 blogdown</h2>
<p>当时我是在 RStudio 的控制台中输入</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-R" data-lang="R"><span style="display:flex;"><span><span style="color:#a6e22e">install.packages</span>(blogdown)
</span></span></code></pre></div><p>但是一直装不上。</p>
<ul>
<li>先是早上因为依赖<code>promises</code>装不上。 blogdown 装不上，通过 Arch Linux 的 yay 解决了。</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fish" data-lang="fish"><span style="display:flex;"><span><span style="color:#a6e22e">yay</span> <span style="color:#a6e22e">-S</span> r-promises
</span></span></code></pre></div><ul>
<li>然后是 RStudio 不能走代理，与 blogdown 库地址的连接时不时断线。最后在多次尝试之后，安装上了。</li>
</ul>
<p>现在回过头看，有另外两种办法可以避免这一问题。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># 一是通过 AUR 安装 R 扩展包的方式来安装，其有更好的依赖管理，并且如果设置了镜像的话，就可以避免代理的问题。</span>
</span></span><span style="display:flex;"><span>yay -S r-blogdown
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-R" data-lang="R"><span style="display:flex;"><span><span style="color:#75715e"># 如果终端可以正常走代理的话，可以通过下面这种方式</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 在命令行 R 中进行安装。这样可以避免 RStudio 的代理设置问题。</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">install.packages</span>(blogdown)
</span></span></code></pre></div><h2 id="安装-hugo">安装 hugo</h2>
<p>采用 AUR 安装扩展包的方式的同学会发现，这一步可以跳过了。因为 AUR 安装依赖时，已经安装好 Hugo 了。</p>
<p>采用 R 或 RStudio 安装的同学需要跟着进行操作，安装 Hugo。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>blogdown<span style="color:#f92672">::</span><span style="color:#a6e22e">install_hugo</span>()
</span></span></code></pre></div><p>这个安装会连接到 yihui 的网站，但是因为 RStudio 连接外网不稳定的原因。国内的同学可能需要通过下面两种方式。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># 方式一</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 在可以走代理的命令行 R 中进行安装</span>
</span></span><span style="display:flex;"><span>blogdown<span style="color:#f92672">::</span><span style="color:#a6e22e">install_hugo</span>()
</span></span></code></pre></div><p>第二种方式引自统计之都的<a href="https://cosx.org/2018/01/build-blog-with-blogdown-hugo-netlify-github/">文章</a></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># 方式二</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 从各种安全途径（比如 github 中),下载压缩包。解压后，然后本地安装。</span>
</span></span><span style="display:flex;"><span>blogdown<span style="color:#f92672">:::</span><span style="color:#a6e22e">install_hugo_bin</span>(<span style="color:#e6db74">&#34;解压后目录的绝对路径&#34;</span>)
</span></span></code></pre></div><ul>
<li>刚解决，立马又遇到因为 Rstudio 不能走部分代理， <code>blogdown::install_hugo</code> 装不了 Hugo。<code>yay</code> 安装的版本又不匹配。不信邪地死磕 Rstudio 的代理了。结果发现设置成全局代理可行又相对简单。上次死磕 Rstudio 是昨天的 fcitx5 不能在里面输入中文，死磕好久，最后认怂改用 ibus 。当然，这里即使改成全局代理也不好用，还是认怂，采用了本地安装的方式。</li>
</ul>
<h2 id="选择主题">选择主题</h2>
<p>然后进入了耗时三小时的选主题环节。因为被<a href="https://afra.com">afra</a> 博客上的 chic 主题的简洁美丽惊艳到了。但这个 hexo 主题没有 Hugo 移植。导致我一边在“转攻使用 hexo 直接用 chic” 还是 “ 采用 blogdown （其默认以Hugo为核心）找个相似主题”中进行抉择。当时我是知道 blogdown 可以用 hexo 做引擎，但是稀缺的认知资源已经不能支撑我才去学习怎么使用 hexo 驱动 blogdown 了。显然，我选择了第二种，花了三个小时选出来两个主题。</p>
<!--- 都已经到下午了，准备活动才完成。-->
<h2 id="构建本地网站">构建本地网站</h2>
<h3 id="建造新网站">建造新网站</h3>
<p>然后正式的安装。</p>
<p>将要存储网站资源的文件夹设置为工作路径。</p>
<p>执行 <code>blogdown::new_site</code> ，在当前路径中建立新网站，参数是选用的 “作者/主题库名称” 。此时 Rstudio 的代理不稳定问题又炸了。因为这个函数的机制是把 <a href="http://github.com">GitHub</a> 上的主题下下来，然后转换成 blogdown 可以用的材料。所以，这个过程又慢又容易报错。试了好多次才凑巧成功。 rstudio 的代理问题一日不解决，一日就是个雷啊。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>blogdown<span style="color:#f92672">::</span><span style="color:#a6e22e">new_site</span>(theme <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;主题名字，可以忽略，使用默认主题&#34;</span>)
</span></span></code></pre></div><p>如果因为网络问题装不上，就多试几次。或者在可以走代理的 R 终端中输入上面的命令。</p>
<h3 id="生成本地预览">生成本地预览</h3>
<p>根据主题生成好网站后，执行 <code>blogdown::server_site</code> 。少有的很顺畅。成功在本地预览博客。<em>其实这里也是个坑，后面再说。</em></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>blogdown<span style="color:#f92672">::</span><span style="color:#a6e22e">server_site</span>()
</span></span></code></pre></div><h3 id="部署到网上">部署到网上</h3>
<p>此时差不多<del>三四五六</del>点左右了，脑袋有点糊，记不清了。开始最后一步了，部署网站到网上。在这里我没有采用 yihui 大神推荐的 httfy，而是部署到到 GitHub Pages 上。主要是是数据已经托管到 GitHub 里了，不想再引入第三方服务了。</p>
<p>最大的经验就是</p>
<blockquote>
<p>网上经验贴可以参考。但操作一定要一步一步跟着官方文档走。</p></blockquote>
<p>先是按照 jekyll 的经验把文件夹里的所有文件都上传了。结果没有成功。</p>
<p>结合经验贴，发现 GitHub Pages 是根据仓库里的文件层级和 Html 文件生成网站的。在 Hugo 方式中，应该只上传 public/ 。但我的是只有一个 post 文件夹。带着怀疑 push 了，当然没成功。</p>
<p>在 blogdown 的官方文档中发现原来是，因为少看了一句 <code>blogdown::build_site</code> 。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># 生成网站文件</span>
</span></span><span style="display:flex;"><span>blogdown<span style="color:#f92672">::</span><span style="color:#a6e22e">build_site</span>()
</span></span></code></pre></div><p>成功<strong>了解到远程库和本地文件夹可以不同名</strong></p>
<h2 id="后话">后话</h2>
<p>在<a href="https://zhangfelix.medium.com/%E4%BD%BF%E7%94%A8hugo%E5%92%8Cgithub%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2-cbd1d57fcfbf">Felix的文章中</a>看到采用子模块的方式，上传网站构建资源。觉得不错，有兴趣的可以去看看。</p>
<p>如果是个人博客使用的话，资源库就是个备份同步的作用，它的 push 没那么重要，可以一天/周或者要换设备工作了，再 push。而博客库 push 完才能网站上更新，所以发帖就要 push。</p>
<ul>
<li>rstudio 的踩坑记：配置输入法、连接git/GitHub、网路代理、project 的使用。</li>
<li>GitHub 的使用潜力：工作台，多端同步，多人协作。</li>
<li>issues 做 日记</li>
</ul>
<p>可以想象吗，这是用 GitHub 的 Andriod app 写的日记。它<code>议题</code>的 markdown 功能的舒适程度简直吊打一众 markdown 写作 app。私有库的议题板块用来存写日记相当棒。</p>
<h2 id="参考文献">参考文献</h2>
<p><a href="https://zhangfelix.medium.com/%E4%BD%BF%E7%94%A8hugo%E5%92%8Cgithub%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2-cbd1d57fcfbf">[1] 使用Hugo和GitHub搭建博客</a></p>
<p><a href="https://cosx.org/2018/01/build-blog-with-blogdown-hugo-netlify-github/">[2] 用 R 语言的 blogdown+hugo+netlify+github 建博客</a></p>
<p><a href="https://slides.yihui.org/2017-blogdown-CGM-Yihui-Xie.html#7">[3] 用 blogdown 搭建一个静态网站兼吐槽学术出版传统</a></p>
<p><a href="https://bookdown.org/yihui/blogdown/">[4] blogdown: Creating Websites with R Markdown</a></p>
<p><a href="https://alison.rbind.io/blog/2020-12-new-year-new-blogdown/">[5] Up &amp; running with blogdown in 2021</a></p>

</article>

<div class="post-navigation" style="margin-top: 30px ; margin-bottom: 40px ;">
    
    <a href="/post/two-pages/" class="prev-post" style="margin-right: 20px; text-decoration: underline;">←
        Setting Atom for GitHub Pages</a>
    
    <br>
    
    <a href="/post/six-pages/" class="next-post" style="text-decoration: underline;">Make VS Code to be a R IDE →</a>
    
</div>

<script src="https://giscus.app/client.js" data-repo="JiangXY98/JiangXY98.github.io"
    data-repo-id="R_kgDOITYhpg" data-category="Announcements" data-category-id="DIC_kwDOITYhps4CqA6z"
    data-mapping="pathname" data-strict="0" data-reactions-enabled="1" data-emit-metadata="0"
    data-input-position="bottom" data-theme="preferred_color_scheme" data-lang="zh-CN" data-loading="lazy"
    crossorigin="anonymous" async>
    </script>

<footer style="font-size: 14px; color: #b0b0b0; text-align: center; margin-top: 66px ;">
    Ⓒ2021-2025·<a href="https://scholar.google.com/citations?hl=zh-CN&user=KhswIMIAAAAJ"
        style="color: #3686e7dd;">Xiaoyu Jiang </a>
    <br>
    <a href="http://www.beian.miit.gov.cn" target="_blank" style="color: #378ef9e0;">蜀ICP备2024096406号-1</a>
</footer>
<footer style="font-size: 12px; color: #b0b0b0; text-align: center;"> <br>
    Powered by Hugo theme: <a href='https://github.com/Masellum/hugo-theme-nostyleplease'
        style="color: #5497e9ac;">(nearly) no-CSS,
        fast,
        minimalist</a>
</footer>


            </div>
        </main>
	<script src="https://cdn.jsdelivr.net/npm/han-css@3/dist/han.min.js"></script>
    </body>
</html>
